<%= '$ ' + @full_csv[2].to_s %>
<!-- Nav tabs -->
<ul class="nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#reduced_csv_tab" role="tab">CSV Reducido</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#no_charged_items_tab" role="tab">Items sin cargar</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#final_table_tab" role="tab">Tabla Final</a>
  </li>
  <li class="nav-item">
    <a class="nav-link disabled" data-toggle="tab" href="#total_tab" role="tab"><%= "Total: $ #{@full_csv[2].to_s}" %></a>
  </li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="reduced_csv_tab" role="tabpanel">
    <table class="table table-striped table-hover display responsive no-wrap" id="reduced_table">
      <thead>
        <tr>
          <th>
            N°
          </th>
          <% @full_csv[0].each do |h| %>
          <th>
            <%= h %>
          </th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% n = 1 %>
        <% @full_csv[1].each do |q| %>
        <tr>
          <td>
            <%= n %>
          </td>
          <% q.each do |i| %>
          <td>
            <%= i %>
          </td>
          <% end %>
        </tr>
        <% n = n + 1 %>
        <% end %>
      </tbody>
    </table>
    <script>
    $(document).ready(function() {
      $('#reduced_table').DataTable({
        responsive: true
      });
      $('#final_table').DataTable({
        responsive: true
      });
    });
    </script>
  </div>
  <div class="tab-pane" id="no_charged_items_tab" role="tabpanel">
    Items de factura sin cargar
    <% if @uncharged_items.count > 0 %>
    <!-- true -->
    <%= "Items sin cargar: #{@uncharged_items.count}" %>
    <%= link_to fa_icon("search", text: "Agregar items"), 'charge_items_bill_configurations_path(uncharged_items: @uncharged_items)', method: :post %>
    <table class="table table-condensed table-striped tabla">
      <thead>
        <tr>
          <th>Código Item</th>
          <th>Detalle</th>
        </tr>
      </thead>
      <tbody>
        <% @uncharged_items.each do |row| %>
        <tr>
          <td><%= row[0] %></td>
          <td><%= row[1] %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
    <% else %>
    <!-- false -->
    <p>
      No hay nada para cargar, todo está on rails! ;)
    </p>
    <% end %>
  </div>
  <div class="tab-pane" id="final_table_tab" role="tabpanel">
    <% if @uncharged_items.count == 0 %>
    <!-- true -->
    Tabla final
    <table class="table tabla" id="final_table_">
      <thead>
        <tr>
          <% @headers.each do |header| %>
          <th><%= header %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @body_table.each do |row| %>
        <tr>
          <% row.each do |cell| %>
          <td>
            <% if row.first == cell %>
            <%= cell %>
            <% else %>
            <%= show_number cell %>
            <% end %>
          </td>
          <% end %>
        </tr>
        <% end %>
      </tbody>
    </table>
    <% else %>

    <!-- false -->
    <p>
      Hay items en la nueva factura que no se han guardado
    </p>
    <% end %>
  </div>
</div>
